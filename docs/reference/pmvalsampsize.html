<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="pmvalsampsize computes the minimum sample size required for the external validation of an existing multivariable prediction model using the criteria proposed by Archer et al. and Riley et al.  pmvalsampsize can currently be used to calculate the minimum sample size for the external validation of models with binary outcomes.   Continuous and survival (time-to-event) outcome model calculations are a work in progress.  "><title>pmvalsampsize
- Sample Size for External Validation of a Prediction Model — pmvalsampsize • pmvalsampsize</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="pmvalsampsize
- Sample Size for External Validation of a Prediction Model — pmvalsampsize"><meta property="og:description" content="pmvalsampsize computes the minimum sample size required for the external validation of an existing multivariable prediction model using the criteria proposed by Archer et al. and Riley et al.  pmvalsampsize can currently be used to calculate the minimum sample size for the external validation of models with binary outcomes.   Continuous and survival (time-to-event) outcome model calculations are a work in progress.  "><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pmvalsampsize</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JoieEnsor/pmvalsampsize/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>pmvalsampsize
- Sample Size for External Validation of a Prediction Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/JoieEnsor/pmvalsampsize/blob/HEAD/R/pmvalsampsize.R" class="external-link"><code>R/pmvalsampsize.R</code></a></small>
      <div class="d-none name"><code>pmvalsampsize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>pmvalsampsize</code> computes the minimum sample size required for the external validation of an existing multivariable prediction model using the criteria proposed by Archer <em>et al</em>. and Riley <em>et al</em>.  <code>pmvalsampsize</code> can currently be used to calculate the minimum sample size for the external validation of models with binary outcomes. <br><br><em>Continuous and survival (time-to-event) outcome model calculations are a work in progress</em>. <br><br></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pmvalsampsize</span><span class="op">(</span></span>
<span>  <span class="va">type</span>,</span>
<span>  cslope <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  csciwidth <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  oe <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  oeciwidth <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  cstatistic <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  cstatciwidth <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  simobs <span class="op">=</span> <span class="fl">1e+06</span>,</span>
<span>  lpnormal <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  lpbeta <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  lpcstat <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="fl">5e-04</span>,</span>
<span>  increment <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  oeseincrement <span class="op">=</span> <span class="fl">1e-04</span>,</span>
<span>  graph <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  prevalence <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123456</span>,</span>
<span>  sensitivity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  specificity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  threshold <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  nbciwidth <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  nbseincrement <span class="op">=</span> <span class="fl">1e-04</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>type</dt>
<dd><p>specifies the type of analysis for which sample size is being calculated</p><ul><li><p><code>"b"</code> specifies sample size calculation for a prediction model with a binary outcome</p></li>
</ul></dd>


<dt>cslope</dt>
<dd><p>specifies the anticipated c-slope performance in the validation sample.  Default conservatively assumes perfect c-slope=1.  The value could alternatively be based on a previous validation study for example.  For <b>binary outcomes</b> the c-slope calculation requires the user to specify a distribution for the assumed LP in the validation sample (or alternatively the distribution of predicted probabilities in the validation sample). See <code>lp*()</code> options below.</p></dd>


<dt>csciwidth</dt>
<dd><p>specifies the target CI width (acceptable precision) for the c-slope performance. Default assumes CI width=0.2.</p></dd>


<dt>oe</dt>
<dd><p>specifies the anticipated O/E performance in the validation sample.  Default conservatively assumes perfect O/E=1.</p></dd>


<dt>oeciwidth</dt>
<dd><p>specifies the target CI width (acceptable precision) for the E/O performance.  Default assumes CI width=0.2.  The choice of CI width is context specific, and depends on the event probability in the population.  See Riley et al. for further details.</p></dd>


<dt>cstatistic</dt>
<dd><p>specifies the anticipated c-statistic performance in the validation sample.  This is a <b>required input</b>. May be based on the optimism-adjusted c-statistic reported in the development study for the existing prediction model. Ideally, this should be an optimism-adjusted c-statistic.  NB: This input is also used when using the <code>lpcstat()</code> option.</p></dd>


<dt>cstatciwidth</dt>
<dd><p>specifies the target CI width (acceptable precision) for the c-statistic performance.  Default assumes CI width=0.1.</p></dd>


<dt>simobs</dt>
<dd><p>specifies the number of observations to use when simulating the LP distribution for c-slope calculation in criteria 2.  Default observations=1,000,000.  Higher <code>simobs()</code> values will reduce random variation further.</p></dd>


<dt>lpnormal</dt>
<dd><p>defines parameters to simulate the LP distribution for criteria 2 from a normal distribution.  The user must specify the mean and standard deviation (in this order) of the LP distribution.</p></dd>


<dt>lpbeta</dt>
<dd><p>defines parameters to simulate the distribution of predicted probabilities for criteria 2 from a beta distribution.  The user must specify the alpha and beta parameters (in this order) of the probability distribution. The LP distribution is then generated internally using this probability distribution.</p></dd>


<dt>lpcstat</dt>
<dd><p>defines parameters to simulate the LP distribution for criteria 2 assuming that the distribution of events and non-events are normal with a common variance.  The user specifies a single input value - the expected mean for the non-events distribution. This could be informed by clinical guidance.  However, this input is taken as a starting value and an iterative process is used to identify the most appropriate values for the event and non-event distributions so as to closely match the anticipated prevalence in the validation sample.  NB: this approach makes strong assumptions of normality and equal variances in each outcome group, which may be unrealistic in most situations.</p></dd>


<dt>tolerance</dt>
<dd><p>for use with <code>lpcstat</code> option.  Sets the tolerance for agreement between the simulated and expected event proportion during the iterative procedure for calculating the mean for the non-events distribution.</p></dd>


<dt>increment</dt>
<dd><p>for use with <code>lpcstat</code> option.  Sets increment by which to iterate the value of the mean for the non-events distribution.  Trial and error may be necessary as it is dependent on how close the initial input for the non-event mean in <code>lpcstat</code> is to the required value.  If the process takes a particularly long time then the user could try an alternative increment value, or an alternative non-event mean value in <code>lpcstat</code>.  The <code>trace</code> option may be useful in such circumstances.</p></dd>


<dt>oeseincrement</dt>
<dd><p>sets the increment by which to iterate when identifying the SE(ln(OE)) to meet the target CI width specified for OE.  The default iteration increment=0.0001.  In the majority of cases this will be suitably small to ensure a precise SE is identified.  The user should check the output table to ensure that the target CI width has been attained and adjust the increment if necessary.</p></dd>


<dt>graph</dt>
<dd><p>specifies that a histogram of the simulated LP distribution for criteria 2 is produced.  The graph also details summary statistics for the simulated distribution.  Useful option for checking the simulated LP distribution against the source of input parameters.  Also useful for reporting at publication.</p></dd>


<dt>trace</dt>
<dd><p>for use with <code>lpcstat</code> option.  Specifies that a trace of the values obtained in each iteration when identifying the non-event mean is output.  Useful when finding the appropriate values for <code>lpcstat</code> &amp; <code>increment()</code> is proving difficult!</p></dd>


<dt>prevalence</dt>
<dd><p>specifies the overall outcome proportion (for a prognostic model) or overall prevalence (for a diagnostic model) expected within the model validation sample.  This is a <b>required input</b>.  This should be derived based on previous studies in the same population or directly from the validation sample if to hand.</p></dd>


<dt>seed</dt>
<dd><p>specifies the initial value of the random-number seed used by the random-number functions when simulating data to approximate the LP distribution for criteria 2.</p></dd>


<dt>sensitivity</dt>
<dd><p>specifies the anticipated sensitivity performance in the validation sample at the chosen risk threshold (specified using <code>threshold</code>). If sensitivity and specificity are not provided then <code>pmvalsampsize</code> uses the simulated LP distribution from criteria 2 and the user-specified risk threshold to estimate the anticipated sensitivity and specificity to be used in calculation of net benefit. NB: net benefit criteria is not calculated if either i) <code>sensitivity</code>, <code>specificity</code> and <code>threshold</code> or ii) <code>threshold</code> option are not specified.</p></dd>


<dt>specificity</dt>
<dd><p>specifies the anticipated specificity performance in the validation sample at the chosen risk threshold (specified using <code>threshold</code>). If sensitivity and specificity are not provided then <code>pmvalsampsize</code> uses the simulated LP distribution from criteria 2 and the user-specified risk threshold to estimate the anticipated sensitivity and specificity to be used in calculation of net benefit. NB: net benefit criteria is not calculated if either i) <code>sensitivity</code>, <code>specificity</code> and <code>threshold</code> or ii) <code>threshold</code> option are not specified.</p></dd>


<dt>threshold</dt>
<dd><p>specifies the risk threshold to be used for calculation of net benefit performance of the model in the validation sample. If sensitivity and specificity are not provided then <code>threshold</code> must be given in order for <code>pmvalsampsize</code> to assess sample size requirements for net benefit. NB: net benefit criteria is not calculated if either i) <code>sensitivity</code>, <code>specificity</code> and <code>threshold</code> or ii) <code>threshold</code> option are not specified.</p></dd>


<dt>nbciwidth</dt>
<dd><p>specifies the target CI width (acceptable precision) for the standardised net benefit performance.  Default assumes CI width=0.2.  The choice of CI width is context specific.  See Riley et al. for further details.</p></dd>


<dt>nbseincrement</dt>
<dd><p>sets the increment by which to iterate when identifying the SE(standardised net benefit) to meet the target CI width specified for standardised net benefit.  The default iteration increment=0.0001.  In the majority of cases this will be suitably small to ensure a precise SE is identified.  The user should check the output table to ensure that the target CI width has been attained and adjust the increment if necessary.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list including a matrix of calculated sample size requirements for each criteria defined under <em>'Details'</em>, and a series of vectors of parameters used in the calculations as well as the the final recommended minimum sample size and number of events required for external validation.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A series of criteria define the sample size needed to ensure precise estimation of key measures of prediction model performance, allowing conclusions to be drawn about whether the model is potentially accurate and useful in a given population of interest.<br><br></p>

<p>For <b>binary outcomes</b>, there are three criteria to calculate the sample size (N) needed for: <br>
i) precise estimation of the Observed/Expected (O/E) statistic, <br>
ii) precise estimation of the calibration slope (c-slope), and <br>
iii) precise estimation of the c-statistic.</p>
<p>The sample size calculation requires the user to pre-specify the following; <br>
- the outcome event proportion <br>
- the anticipated O/E performance <br>
- the target precision (CI width) for the O/E <br>
- the anticipated c-slope <br>
- the target precision (CI width) for the c-slope <br>
- the anticipated c-statisitic performance <br>
- the target precision (CI width) for the c-statisitic <br>
- the distribution of estimated probabilities from the model, ideally specified on the log-odds scale - AKA the Linear Predictor (LP) <br><br></p>
<p>With thanks to Richard Riley for helpful feedback</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Archer L, Snell K, Ensor J, Hudda MT, Collins GS, Riley RD.  Minimum sample size for external validation of a clinical prediction model with a continuous outcome. <em>Statistics in Medicine. 2020.</em></p>
<p>Riley RD, Debray TPA, Collins G, Archer L, Ensor J, van Smeden M, Snell KIE.  Minimum sample size for external validation of a clinical prediction model with a binary outcome. <em>Statistics in Medicine. 2021.</em></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Joie Ensor (University of Birmingham, j.ensor@bham.ac.uk)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Examples based on those included in the papers referenced below by</span></span></span>
<span class="r-in"><span><span class="co"># Riley et al. &amp; Archer et al. published in Statistics in Medicine.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that the examples below use a very low simulation sample for criteria</span></span></span>
<span class="r-in"><span><span class="co"># 2 for brevity. Sizes matching the default or higher are recommended to </span></span></span>
<span class="r-in"><span><span class="co"># minimise uncertainty in the calculated sample size requirements.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Binary outcomes (Logistic prediction models)</span></span></span>
<span class="r-in"><span><span class="co"># Use pmvalsampsize to calculate the minimum sample size required to</span></span></span>
<span class="r-in"><span><span class="co"># externally validate an existing multivariable prediction model for a</span></span></span>
<span class="r-in"><span><span class="co"># binary outcome (e.g. mechanical heart valve failure).  Based on previous</span></span></span>
<span class="r-in"><span><span class="co"># evidence, the outcome prevalence is anticipated to be 0.018 (1.8%) and the</span></span></span>
<span class="r-in"><span><span class="co"># reported c-statistic was 0.8.  The LP distribution was published and</span></span></span>
<span class="r-in"><span><span class="co"># appeared normally distributed with mean(SD) of -5(2.5).  We target default</span></span></span>
<span class="r-in"><span><span class="co"># CI widths for all but O/E CI width=1 (see Riley et al. for details). We can</span></span></span>
<span class="r-in"><span><span class="co"># use the graph option to check the simulated distribution is appropriate.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">pmvalsampsize</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"b"</span>, prevalence <span class="op">=</span> <span class="fl">0.018</span>, cstatistic <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>lpnorm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="fl">2.5</span><span class="op">)</span>, oeciwidth <span class="op">=</span> <span class="fl">1</span>, simobs <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Normal LP distribution with parameters - mean=-5, sd=2.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          Samp_size Perf    SE CI width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 1 - O/E               905  1.0 0.246      1.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 2 - C-slope          4501  1.0 0.051      0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 3 - C statistic      4252  0.8 0.026      0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Final SS                      4501  1.0 0.051      0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Minimum sample size required for model validation based on user inputs = 4501, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  with 82 events (assuming an outcome prevalence = 0.018) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Alternatively, lets assume that the authors provided a distribution of</span></span></span>
<span class="r-in"><span><span class="co"># predicted probabilities (e.g. as part of a calibration plot).  We can use</span></span></span>
<span class="r-in"><span><span class="co"># this to specify parameters for a beta distribution to simulate the LP</span></span></span>
<span class="r-in"><span><span class="co"># distribution as below:</span></span></span>
<span class="r-in"><span><span class="fu">pmvalsampsize</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"b"</span>, prevalence <span class="op">=</span> <span class="fl">0.018</span>, cstatistic <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>lpbeta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.5</span><span class="op">)</span>, oeciwidth <span class="op">=</span> <span class="fl">1</span>, simobs <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Beta P distribution with parameters - alpha=0.5, beta=0.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          Samp_size Perf    SE CI width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 1 - O/E               905  1.0 0.246      1.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 2 - C-slope          1641  1.0 0.051      0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 3 - C statistic      4252  0.8 0.026      0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Final SS                      4252  0.8 0.026      0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Minimum sample size required for model validation based on user inputs = 4252, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  with 77 events (assuming an outcome prevalence = 0.018) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Finally, we can use the anticipated c-statistic to simulate the event and</span></span></span>
<span class="r-in"><span><span class="co"># non-event distributions assuming normality and common variances.  We input</span></span></span>
<span class="r-in"><span><span class="co"># a starting value for the mean of the non-events distribution as below:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">pmvalsampsize</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"b"</span>, prevalence <span class="op">=</span> <span class="fl">0.018</span>, cstatistic <span class="op">=</span> <span class="fl">0.8</span>,</span></span>
<span class="r-in"><span>lpcstat <span class="op">=</span> <span class="op">-</span><span class="fl">4.7</span>, oeciwidth <span class="op">=</span> <span class="fl">1</span>, seed <span class="op">=</span> <span class="fl">1234</span>, simobs <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportion of observed outcome events is within tolerance</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Proportion of outcome events under simulation =0.0183</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Target prevalence =0.018</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Mean in non-event group = -4.7</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          Samp_size Perf    SE CI width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 1 - O/E               905  1.0 0.246      1.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 2 - C-slope         16175  1.0 0.051      0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Criteria 3 - C statistic      4252  0.8 0.026      0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Final SS                     16175  1.0 0.051      0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Minimum sample size required for model validation based on user inputs = 16175, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  with 292 events (assuming an outcome prevalence = 0.018) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Joie Ensor.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

