[{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Joie Ensor. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Ensor J (2024). pmvalsampsize: Sample Size External Validation Prediction Model. R package version 0.1.0, https://github.com/JoieEnsor/pmvalsampsize.","code":"@Manual{,   title = {pmvalsampsize: Sample Size for External Validation of a Prediction Model},   author = {Joie Ensor},   year = {2024},   note = {R package version 0.1.0},   url = {https://github.com/JoieEnsor/pmvalsampsize}, }"},{"path":"/index.html","id":"pmvalsampsize","dir":"","previous_headings":"","what":"Sample Size for External Validation of a Prediction Model","title":"Sample Size for External Validation of a Prediction Model","text":"Sample Size External Validation Prediction Model","code":""},{"path":"/reference/pmvalsampsize.html","id":null,"dir":"Reference","previous_headings":"","what":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"pmvalsampsize computes minimum sample size required external validation existing multivariable prediction model using criteria proposed Archer et al. Riley et al.  pmvalsampsize can currently used calculate minimum sample size external validation models binary outcomes. Continuous survival (time--event) outcome model calculations work progress.","code":""},{"path":"/reference/pmvalsampsize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"","code":"pmvalsampsize(   type,   cslope = 1,   csciwidth = 0.2,   oe = 1,   oeciwidth = 0.2,   cstatistic = NA,   cstatciwidth = 0.1,   simobs = 1e+06,   lpnormal = NA,   lpbeta = NA,   lpcstat = NA,   tolerance = 5e-04,   increment = 0.1,   oeseincrement = 1e-04,   graph = FALSE,   trace = FALSE,   prevalence = NA,   seed = 123456,   sensitivity = NA,   specificity = NA,   threshold = NA,   nbciwidth = 0.2,   nbseincrement = 1e-04 )"},{"path":"/reference/pmvalsampsize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"type specifies type analysis sample size calculated \"b\" specifies sample size calculation prediction model binary outcome cslope specifies anticipated c-slope performance validation sample.  Default conservatively assumes perfect c-slope=1.  value alternatively based previous validation study example.  binary outcomes c-slope calculation requires user specify distribution assumed LP validation sample (alternatively distribution predicted probabilities validation sample). See lp*() options . csciwidth specifies target CI width (acceptable precision) c-slope performance. Default assumes CI width=0.2. oe specifies anticipated O/E performance validation sample.  Default conservatively assumes perfect O/E=1. oeciwidth specifies target CI width (acceptable precision) E/O performance.  Default assumes CI width=0.2.  choice CI width context specific, depends event probability population.  See Riley et al. details. cstatistic specifies anticipated c-statistic performance validation sample.  required input. May based optimism-adjusted c-statistic reported development study existing prediction model. Ideally, optimism-adjusted c-statistic.  NB: input also used using lpcstat() option. cstatciwidth specifies target CI width (acceptable precision) c-statistic performance.  Default assumes CI width=0.1. simobs specifies number observations use simulating LP distribution c-slope calculation criteria 2.  Default observations=1,000,000.  Higher simobs() values reduce random variation . lpnormal defines parameters simulate LP distribution criteria 2 normal distribution.  user must specify mean standard deviation (order) LP distribution. lpbeta defines parameters simulate distribution predicted probabilities criteria 2 beta distribution.  user must specify alpha beta parameters (order) probability distribution. LP distribution generated internally using probability distribution. lpcstat defines parameters simulate LP distribution criteria 2 assuming distribution events non-events normal common variance.  user specifies single input value - expected mean non-events distribution. informed clinical guidance.  However, input taken starting value iterative process used identify appropriate values event non-event distributions closely match anticipated prevalence validation sample.  NB: approach makes strong assumptions normality equal variances outcome group, may unrealistic situations. tolerance use lpcstat option.  Sets tolerance agreement simulated expected event proportion iterative procedure calculating mean non-events distribution. increment use lpcstat option.  Sets increment iterate value mean non-events distribution.  Trial error may necessary dependent close initial input non-event mean lpcstat required value.  process takes particularly long time user try alternative increment value, alternative non-event mean value lpcstat.  trace option may useful circumstances. oeseincrement sets increment iterate identifying SE(ln(OE)) meet target CI width specified OE.  default iteration increment=0.0001.  majority cases suitably small ensure precise SE identified.  user check output table ensure target CI width attained adjust increment necessary. graph specifies histogram simulated LP distribution criteria 2 produced.  graph also details summary statistics simulated distribution.  Useful option checking simulated LP distribution source input parameters.  Also useful reporting publication. trace use lpcstat option.  Specifies trace values obtained iteration identifying non-event mean output.  Useful finding appropriate values lpcstat & increment() proving difficult! prevalence specifies overall outcome proportion (prognostic model) overall prevalence (diagnostic model) expected within model validation sample.  required input.  derived based previous studies population directly validation sample hand. seed specifies initial value random-number seed used random-number functions simulating data approximate LP distribution criteria 2. sensitivity specifies anticipated sensitivity performance validation sample chosen risk threshold (specified using threshold). sensitivity specificity provided pmvalsampsize uses simulated LP distribution criteria 2 user-specified risk threshold estimate anticipated sensitivity specificity used calculation net benefit. NB: net benefit criteria calculated either ) sensitivity, specificity threshold ii) threshold option specified. specificity specifies anticipated specificity performance validation sample chosen risk threshold (specified using threshold). sensitivity specificity provided pmvalsampsize uses simulated LP distribution criteria 2 user-specified risk threshold estimate anticipated sensitivity specificity used calculation net benefit. NB: net benefit criteria calculated either ) sensitivity, specificity threshold ii) threshold option specified. threshold specifies risk threshold used calculation net benefit performance model validation sample. sensitivity specificity provided threshold must given order pmvalsampsize assess sample size requirements net benefit. NB: net benefit criteria calculated either ) sensitivity, specificity threshold ii) threshold option specified. nbciwidth specifies target CI width (acceptable precision) standardised net benefit performance.  Default assumes CI width=0.2.  choice CI width context specific.  See Riley et al. details. nbseincrement sets increment iterate identifying SE(standardised net benefit) meet target CI width specified standardised net benefit.  default iteration increment=0.0001.  majority cases suitably small ensure precise SE identified.  user check output table ensure target CI width attained adjust increment necessary.","code":""},{"path":"/reference/pmvalsampsize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"list including matrix calculated sample size requirements criteria defined 'Details', series vectors parameters used calculations well final recommended minimum sample size number events required external validation.","code":""},{"path":"/reference/pmvalsampsize.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"series criteria define sample size needed ensure precise estimation key measures prediction model performance, allowing conclusions drawn whether model potentially accurate useful given population interest. binary outcomes, three criteria calculate sample size (N) needed :  ) precise estimation Observed/Expected (O/E) statistic,  ii) precise estimation calibration slope (c-slope),  iii) precise estimation c-statistic. sample size calculation requires user pre-specify following;  - outcome event proportion  - anticipated O/E performance  - target precision (CI width) O/E  - anticipated c-slope  - target precision (CI width) c-slope  - anticipated c-statisitic performance  - target precision (CI width) c-statisitic  - distribution estimated probabilities model, ideally specified log-odds scale - AKA Linear Predictor (LP) thanks Richard Riley helpful feedback","code":""},{"path":"/reference/pmvalsampsize.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"Archer L, Snell K, Ensor J, Hudda MT, Collins GS, Riley RD.  Minimum sample size external validation clinical prediction model continuous outcome. Statistics Medicine. 2020. Riley RD, Debray TPA, Collins G, Archer L, Ensor J, van Smeden M, Snell KIE.  Minimum sample size external validation clinical prediction model binary outcome. Statistics Medicine. 2021.","code":""},{"path":"/reference/pmvalsampsize.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"Joie Ensor (University Birmingham, j.ensor@bham.ac.uk)","code":""},{"path":"/reference/pmvalsampsize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"pmvalsampsize\r\n- Sample Size for External Validation of a Prediction Model — pmvalsampsize","text":"","code":"# Examples based on those included in the papers referenced below by # Riley et al. & Archer et al. published in Statistics in Medicine.  # Note that the examples below use a very low simulation sample for criteria # 2 for brevity. Sizes matching the default or higher are recommended to  # minimise uncertainty in the calculated sample size requirements.  # Binary outcomes (Logistic prediction models) # Use pmvalsampsize to calculate the minimum sample size required to # externally validate an existing multivariable prediction model for a # binary outcome (e.g. mechanical heart valve failure).  Based on previous # evidence, the outcome prevalence is anticipated to be 0.018 (1.8%) and the # reported c-statistic was 0.8.  The LP distribution was published and # appeared normally distributed with mean(SD) of -5(2.5).  We target default # CI widths for all but O/E CI width=1 (see Riley et al. for details). We can # use the graph option to check the simulated distribution is appropriate.  pmvalsampsize(type = \"b\", prevalence = 0.018, cstatistic = 0.8, lpnorm = c(-5,2.5), oeciwidth = 1, simobs = 1000) #> Normal LP distribution with parameters - mean=-5, sd=2.5 #>                          Samp_size Perf    SE CI width #> Criteria 1 - O/E               905  1.0 0.246      1.0 #> Criteria 2 - C-slope          4501  1.0 0.051      0.2 #> Criteria 3 - C statistic      4252  0.8 0.026      0.1 #> Final SS                      4501  1.0 0.051      0.2 #>   #>  Minimum sample size required for model validation based on user inputs = 4501,  #>  with 82 events (assuming an outcome prevalence = 0.018)  #>   #>     # Alternatively, lets assume that the authors provided a distribution of # predicted probabilities (e.g. as part of a calibration plot).  We can use # this to specify parameters for a beta distribution to simulate the LP # distribution as below: pmvalsampsize(type = \"b\", prevalence = 0.018, cstatistic = 0.8, lpbeta = c(0.5,0.5), oeciwidth = 1, simobs = 1000) #> Beta P distribution with parameters - alpha=0.5, beta=0.5 #>                          Samp_size Perf    SE CI width #> Criteria 1 - O/E               905  1.0 0.246      1.0 #> Criteria 2 - C-slope          1641  1.0 0.051      0.2 #> Criteria 3 - C statistic      4252  0.8 0.026      0.1 #> Final SS                      4252  0.8 0.026      0.1 #>   #>  Minimum sample size required for model validation based on user inputs = 4252,  #>  with 77 events (assuming an outcome prevalence = 0.018)  #>   #>    # Finally, we can use the anticipated c-statistic to simulate the event and # non-event distributions assuming normality and common variances.  We input # a starting value for the mean of the non-events distribution as below:  pmvalsampsize(type = \"b\", prevalence = 0.018, cstatistic = 0.8, lpcstat = -4.7, oeciwidth = 1, seed = 1234, simobs = 10000) #> Proportion of observed outcome events is within tolerance #> Proportion of outcome events under simulation =0.0183 #> Target prevalence =0.018 #> Mean in non-event group = -4.7 #>  #>                          Samp_size Perf    SE CI width #> Criteria 1 - O/E               905  1.0 0.246      1.0 #> Criteria 2 - C-slope         16175  1.0 0.051      0.2 #> Criteria 3 - C statistic      4252  0.8 0.026      0.1 #> Final SS                     16175  1.0 0.051      0.2 #>   #>  Minimum sample size required for model validation based on user inputs = 16175,  #>  with 292 events (assuming an outcome prevalence = 0.018)  #>   #>"},{"path":"/news/index.html","id":"pmvalsampsize-v010-release-date-2023-11-14","dir":"Changelog","previous_headings":"","what":"pmvalsampsize v0.1.0 (Release date: 2023-11-14)","title":"pmvalsampsize v0.1.0 (Release date: 2023-11-14)","text":"CRAN release: 2023-11-16 new release","code":""}]
